{"ast":null,"code":"var _jsxFileName = \"/home/ashok/student-mis-system/src/components/CsvUploader.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { Form, Alert, Table, Button } from 'react-bootstrap';\nimport Papa from 'papaparse';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CsvUploader = ({\n  onUpload\n}) => {\n  _s();\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState('');\n  const [preview, setPreview] = useState(null);\n  const fileInputRef = useRef(null);\n  const validateFile = file => {\n    // Check file type\n    if (!file.name.endsWith('.csv')) {\n      return 'Please upload a CSV file';\n    }\n\n    // Check file size (5MB limit)\n    if (file.size > 5 * 1024 * 1024) {\n      return 'File size exceeds 5MB limit';\n    }\n    return '';\n  };\n  const handleFileChange = e => {\n    const selectedFile = e.target.files[0];\n    if (!selectedFile) {\n      setFile(null);\n      setError('');\n      setPreview(null);\n      return;\n    }\n    const validationError = validateFile(selectedFile);\n    if (validationError) {\n      setFile(null);\n      setError(validationError);\n      setPreview(null);\n      // Reset file input\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n      return;\n    }\n    setFile(selectedFile);\n    setError('');\n\n    // Parse CSV for preview and pass to parent component\n    Papa.parse(selectedFile, {\n      header: true,\n      skipEmptyLines: true,\n      preview: 5,\n      // Only parse first 5 rows for preview\n      complete: results => {\n        setPreview(results);\n        onUpload(results);\n      },\n      error: error => {\n        setError('Error parsing CSV: ' + error.message);\n        setPreview(null);\n      }\n    });\n  };\n  const renderPreview = () => {\n    if (!preview || !preview.data || preview.data.length === 0) {\n      return null;\n    }\n    const headers = Object.keys(preview.data[0]);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"CSV Preview (First 5 rows)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-responsive\",\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          size: \"sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: headers.map((header, index) => /*#__PURE__*/_jsxDEV(\"th\", {\n                children: header\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: preview.data.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: headers.map((header, colIndex) => /*#__PURE__*/_jsxDEV(\"td\", {\n                children: row[header]\n              }, colIndex, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 21\n              }, this))\n            }, rowIndex, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n      controlId: \"csvUpload\",\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Upload your academic and skills CSV file\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"file\",\n        onChange: handleFileChange,\n        ref: fileInputRef,\n        accept: \".csv\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n        className: \"text-muted\",\n        children: \"File should be in CSV format and less than 5MB in size.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-info-circle text-primary me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Don't have a CSV file? \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/sample_student_data.csv\",\n        download: true,\n        className: \"ms-1 text-decoration-none\",\n        children: \"Download sample template\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }, this), file && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"success\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-check-circle-fill me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this), \"File \\\"\", file.name, \"\\\" (\", (file.size / 1024).toFixed(2), \" KB) uploaded successfully!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this), renderPreview()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n_s(CsvUploader, \"0V97jYPDSzt1JvTi4Bj4wq/16qU=\");\n_c = CsvUploader;\nexport default CsvUploader;\nvar _c;\n$RefreshReg$(_c, \"CsvUploader\");","map":{"version":3,"names":["React","useState","useRef","Form","Alert","Table","Button","Papa","jsxDEV","_jsxDEV","CsvUploader","onUpload","_s","file","setFile","error","setError","preview","setPreview","fileInputRef","validateFile","name","endsWith","size","handleFileChange","e","selectedFile","target","files","validationError","current","value","parse","header","skipEmptyLines","complete","results","message","renderPreview","data","length","headers","Object","keys","className","children","fileName","_jsxFileName","lineNumber","columnNumber","striped","bordered","hover","map","index","row","rowIndex","colIndex","Group","controlId","Label","Control","type","onChange","ref","accept","Text","href","download","variant","toFixed","_c","$RefreshReg$"],"sources":["/home/ashok/student-mis-system/src/components/CsvUploader.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Form, Alert, Table, Button } from 'react-bootstrap';\nimport Papa from 'papaparse';\n\nconst CsvUploader = ({ onUpload }) => {\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState('');\n  const [preview, setPreview] = useState(null);\n  const fileInputRef = useRef(null);\n\n  const validateFile = (file) => {\n    // Check file type\n    if (!file.name.endsWith('.csv')) {\n      return 'Please upload a CSV file';\n    }\n    \n    // Check file size (5MB limit)\n    if (file.size > 5 * 1024 * 1024) {\n      return 'File size exceeds 5MB limit';\n    }\n    \n    return '';\n  };\n\n  const handleFileChange = (e) => {\n    const selectedFile = e.target.files[0];\n    \n    if (!selectedFile) {\n      setFile(null);\n      setError('');\n      setPreview(null);\n      return;\n    }\n    \n    const validationError = validateFile(selectedFile);\n    if (validationError) {\n      setFile(null);\n      setError(validationError);\n      setPreview(null);\n      // Reset file input\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n      return;\n    }\n    \n    setFile(selectedFile);\n    setError('');\n    \n    // Parse CSV for preview and pass to parent component\n    Papa.parse(selectedFile, {\n      header: true,\n      skipEmptyLines: true,\n      preview: 5, // Only parse first 5 rows for preview\n      complete: (results) => {\n        setPreview(results);\n        onUpload(results);\n      },\n      error: (error) => {\n        setError('Error parsing CSV: ' + error.message);\n        setPreview(null);\n      }\n    });\n  };\n\n  const renderPreview = () => {\n    if (!preview || !preview.data || preview.data.length === 0) {\n      return null;\n    }\n    \n    const headers = Object.keys(preview.data[0]);\n    \n    return (\n      <div className=\"mt-4\">\n        <h5>CSV Preview (First 5 rows)</h5>\n        <div className=\"table-responsive\">\n          <Table striped bordered hover size=\"sm\">\n            <thead>\n              <tr>\n                {headers.map((header, index) => (\n                  <th key={index}>{header}</th>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              {preview.data.map((row, rowIndex) => (\n                <tr key={rowIndex}>\n                  {headers.map((header, colIndex) => (\n                    <td key={colIndex}>{row[header]}</td>\n                  ))}\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div>\n      <Form.Group controlId=\"csvUpload\" className=\"mb-3\">\n        <Form.Label>Upload your academic and skills CSV file</Form.Label>\n        <Form.Control \n          type=\"file\" \n          onChange={handleFileChange}\n          ref={fileInputRef}\n          accept=\".csv\"\n        />\n        <Form.Text className=\"text-muted\">\n          File should be in CSV format and less than 5MB in size.\n        </Form.Text>\n      </Form.Group>\n      \n      <div className=\"d-flex align-items-center mb-3\">\n        <i className=\"bi bi-info-circle text-primary me-2\"></i>\n        <span>Don't have a CSV file? </span>\n        <a \n          href=\"/sample_student_data.csv\" \n          download \n          className=\"ms-1 text-decoration-none\"\n        >\n          Download sample template\n        </a>\n      </div>\n      \n      {error && <Alert variant=\"danger\">{error}</Alert>}\n      \n      {file && (\n        <Alert variant=\"success\">\n          <i className=\"bi bi-check-circle-fill me-2\"></i>\n          File \"{file.name}\" ({(file.size / 1024).toFixed(2)} KB) uploaded successfully!\n        </Alert>\n      )}\n      \n      {renderPreview()}\n    </div>\n  );\n};\n\nexport default CsvUploader;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}